% Gemini theme
% https://github.com/anishathalye/gemini

\documentclass[final]{beamer}

% ====================
% Packages
% ====================

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[size=custom,width=120,height=72,scale=1.0]{beamerposter}
\usetheme{gemini}
\usecolortheme{uw}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.14}
\usepackage{anyfontsize}

\usepackage{tikz}
\usetikzlibrary{cd,decorations.markings,arrows.meta,calc}

\usepackage{
  amsmath,
  amssymb,
  amsthm,
%  amsrefs,
  amsfonts,
  mathtools,
  bbm,
  mathdots,
  bm,        % bold Greek letters
  mathrsfs,  % mathscr
  microtype, % improved formatting
  thmtools,  % fixes theorem referencing
}

\usepackage[normalem]{ulem}

\usepackage{caption}
\usepackage[normalsize]{subfigure}

\usepackage[alphabetic, msc-links, nobysame, lite]{amsrefs}

\usepackage[capitalize]{cleveref}
\crefformat{section}{\S{#2#1#3}}
\Crefformat{section}{\S{#2#1#3}}
\crefrangeformat{section}{\S\S{{#3#1#4}} to #5#2#6}
\Crefrangeformat{section}{\S\S{{#3#1#4}} to #5#2#6}
\crefmultiformat{section}{\S{\S{#2#1#3}}}{ and~#2#1#3}{, #2#1#3}{, and~#2#1#3}
\Crefmultiformat{section}{\S{\S{#2#1#3}}}{ and~#2#1#3}{, #2#1#3}{, and~#2#1#3}
\crefformat{equation}{(#2#1#3)}
\Crefformat{equation}{(#2#1#3)}
\crefrangeformat{equation}{(#3#1#4) to (#5#2#6)}
\Crefrangeformat{equation}{(#3#1#4) to (#5#2#6)}
\crefmultiformat{equation}{(#2#1#3)}{ and~(#2#1#3)}{, (#2#1#3)}{, and~(#2#1#3)}
\Crefmultiformat{equation}{(#2#1#3)}{ and~(#2#1#3)}{, (#2#1#3)}{, and~(#2#1#3)}

\usepackage[capitalize]{cleveref} 
% \mathtoolsset{showonlyrefs} % this is not compatible with cleveref; instead:
\usepackage{autonum}

% \renewcommand{\arraystretch}{1.6}
% \makeatletter
% \renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{
%   \hskip -\arraycolsep
%   \let\@ifnextchar\new@ifnextchar
%   \array{#1}}
% \makeatother

\usepackage{style}
\newcommand*{\defn}[1]{\textbf{#1}}

% ====================
% Lengths
% ====================

% If you have N columns, choose \sepwidth and \colwidth such that
% (N+1)*\sepwidth + N*\colwidth = \paperwidth
\newlength{\sepwidth}
\newlength{\colwidth}
\setlength{\sepwidth}{0.025\paperwidth}
\setlength{\colwidth}{0.3\paperwidth}

\newcommand{\separatorcolumn}{\begin{column}{\sepwidth}\end{column}}

% ====================
% Title
% ====================

\title{Formalizing polyhedral geometry in Lean}
\author{Seven Lewis \and George Peykanu \and Caelan Ritter \and Freda Zhang}
\institute[]{University of Washington}

% ====================
% Footer (optional)
% ====================

\footercontent{Washington Experimental Mathematics Lab, Spring 2025}
% (can be left out to remove footer)

% ====================
% Logo (optional)
% ====================

% use this to include logos on the left and/or right side of the header:
% \logoright{\includegraphics[height=7cm]{logo1.pdf}}
% \logoleft{\includegraphics[height=7cm]{logo2.pdf}}

% ====================
% Body
% ====================

\begin{document}

\begin{frame}[t]
\begin{columns}[t]
\separatorcolumn

\begin{column}{\colwidth}

\begin{block}{Background}
Let $X$ be a compact Riemann surface of genus $g$.  The flat Hermitian metric on the space $H^{0}(X,\Omega_{X}^{1})$ of holomorphic $1$-forms is defined by $\ang{\alpha,\beta} \defeq \frac{i}{2}\int_{X} \alpha \wedge \overline{\beta}$.  Choosing an orthonormal basis $\omega_{1}, \ldots, \omega_{g}$, the Arakelov $(1,1)$-form on $X$ is then given by
\begin{equation}
  \nu_{X} \defeq \frac{i}{2} \sum_{i=1}^{g} \omega_{i} \wedge \overline{\omega}_{i},
\end{equation}
which one can show is independent of the choice of basis.

Let $\Jac(X) \defeq H^{0}(X,\Omega_{X}^{1})^{\vee}/H_{1}(X,\ZZ)$ denote the Jacobian of $X$, with $\Phi_{q} \maps X \to \Jac(X)$ the corresponding Abel--Jacobi map based at $q \in X$.  Then the K\"ahler metric on $\Jac(X)$ induced by the flat metric on $H^{0}(X,\Omega_{X}^{1})$ has an associated $(1,1)$-form $\nu_{\Jac(X)}$ that satisfies
\begin{equation}\label{eq:pullback}
  \Phi_{q}^{*}(\nu_{\Jac(X)}) = \nu_{X}.
\end{equation}
We write $\wti W_{d}$ for the algebraic $d$-cycle on $\Jac(X)$ that parameterizes effective divisors on $X$ of degree $d$.  Then
\begin{equation}\label{eq:integral}
  \int_{\wti W_{d}} \frac{1}{d!}\,\nu_{\Jac(X)}^{\wedge d} = \binom{g}{d}.
\end{equation}
Our goal is to find the correct analogue of the form $\nu_{\Jac(X)}$ in the tropical setting.
\end{block}

\begin{block}{Tropical preliminaries}

Let $G$ be a finite graph with vertex set $V$ and edge set $E$, along with a length function $\ell \maps E \to \RR_{>0}$.  We associate to each edge $e$ the closed interval $[0,\ell(e)] \subset \RR$ and glue these intervals together at their endpoints according to the adjacency relations given in $G$.  The resulting topological graph, endowed with the shortest-path metric, is called a \defn{metric graph} $\Gamma$.  The pair $(G,\ell)$ is called a \defn{model} for $\Gamma$; notice that $\Gamma$ has many different models, which are related to each other by refinement of edges.

Metric graphs are the tropical analogue of smooth algebraic curves.  Accordingly, to each metric graph $\Gamma$ of genus $g$ we can associate a $g$-dimensional real torus $\Jac(\Gamma)$ called its \defn{tropical Jacobian} as follows.  Fix a model $(G,\ell)$ of $\Gamma$ and an orientation on $E$.  The \defn{length pairing} $[\cdot,\cdot]$ on $C_{1}(G,\ZZ)$ is defined by
\begin{equation}
  [e, e'] \defeq
  \begin{cases}
    \ell(e) &\text{ if } e = e'  \\
    0 &\text{ otherwise}
  \end{cases}
\end{equation}
and extended bilinearly.  This descends to $H_1(\Gamma,\ZZ)$.  Let $N \defeq H^1(\Gamma,\ZZ) \cong H_1(\Gamma,\ZZ)^{\vee}$ and let $\Lambda$ denote the image of the embedding $H_{1}(\Gamma,\ZZ) \hookrightarrow N_{\RR}$ defined by $\gamma \mapsto [\gamma,\cdot]$.  Then we let $\Jac(\Gamma) \defeq N_{\RR}/\Lambda$.  Fixing a basis $\gamma_1,\ldots,\gamma_g$ for $H_1(G,\ZZ)$ yields the corresponding dual basis $n_{1},\ldots,n_{g}$ for $N$.  Write $\mathbf{G}$ for the Gram matrix of $[\cdot,\cdot]$ with respect to the basis $\gamma_{i}$.  Let $\mathbf{M}$ denote the $g \times \card{E}$ matrix satisfying $\gamma_{j} = \sum_{e} \mathbf{M}_{i,e}e$ and $\mathbf{D}$ the $\card{E} \times \card{E}$ diagonal matrix with $\mathbf{D}_{e,e} = \ell(e)$.  Then 
\begin{equation}
  \mathbf{G} = \mathbf{M}\mathbf{D}\mathbf{M}^{\transpose}.
\end{equation}

Fixing a basepoint $q \in \Gamma$, the $d$-th \defn{Abel--Jacobi map} $\Phi_{q}^{(d)} \maps \Gamma^{d} \to \Jac(\Gamma)$ sends $(p_{1},\ldots,p_{d}) \mapsto \sum_{i=1}^{d}[\gamma_{p_{i}},\cdot]$, where $\gamma_{p_{i}}$ is any path in $\Gamma$ from $q$ to $p_{i}$.  Its image, denoted $\wti W_{d}$, is the $d$-th \defn{effective locus} of $\Gamma$.  It is a rational polyhedral subset of $\Jac(\Gamma)$ of pure dimension $d$ \cite{gross2022effective}.  One can alternatively define the Jacobian in terms of tropical divisors and chip firing, in which case $\wti W_{d}$ is the precisely the locus of effective divisors of degree $d$ (under the identification $\Jac(\Gamma) \cong \Pic^{d}(\Gamma)$ given by $D \mapsto D + d[q]$).  We note that the $\wti W_{g-1}$ coincides with the tropical theta divisor $\Theta$ of \cite{gross2023tautological}.
\end{block}
\end{column}

\separatorcolumn

\begin{column}{\colwidth}

\begin{block*}
In \cite{lagerberg2012super}, Lagerberg introduced superforms as a way of mimicking the bigraded nature of Dolbeault cohomology, along with notions of positivity, in a real affine space with a fixed integral structure.  This is well-suited for application to tropical geometry; we use this formalism to define the complex analogue of the canonical $(1,1)$-form.

We let $\cA^{p}(N_{\RR})$ denote the space of smooth $p$-forms on an affine space $N_{\RR}$, with coordinates $x_{i}$ associated to the basis vectors $n_{i} \in N$.  Then the space of \defn{$(p,q)$-superforms} is 
\begin{equation}
  \Cd^{p,q}(N_{\RR}) \defeq \cA^{p}(N_{\RR}) \otimes_{\RR} \cA^{q}(N_{\RR}) \cong C^{\infty}(N_{\RR}) \otimes_{\ZZ} \bigwedge^{p}N^{\vee} \otimes_{\ZZ} \bigwedge^{q}N^{\vee}.
\end{equation}
We write a $(p,q)$ superform as $h d'x_{I} \wedge d''x_{J}$, and by abuse of notation, allow anticommuting: $d'x_{i} \wedge d''x_{j} = -d''x_{j} \wedge d'x_{i}$.  There are natural exterior derivatives $d'$ and $d''$ akin to $\partial$ and $\bar\partial$, a wedge product, and a pullback along integral affine maps.  Likewise, the integral of a superform $h d'x_{[g]} \wedge d''x_{[g]}$ with compact support is defined in terms of a smooth integral by
\begin{equation}
  \int_{N_{\RR}} h d'x_{[g]} \wedge d''x_{[g]} \defeq (-1)^{\binom{g}{2}} \int_{N_{\RR}} h dx_{[g]}.
\end{equation}
These notions all carry over to tropical spaces, and in particular, to metric graphs $\Gamma$ and their Jacobians.
\end{block*}

\begin{block}{The canonical $\mathbf{(1,1)}$-form}

We define the \defn{canonical $(1,1)$-form} on $\Jac(\Gamma)$ is 
\begin{equation}
  \nu_{\Jac(\Gamma)} \defeq \sum_{i,j} (\mathbf{G}^{-1})_{i,j} d'x_{i} \wedge d''x_{j}.
\end{equation}
This is independent of the choice of coordinates; indeed, a more intrinsic definition is that $\nu_{\Jac(\Gamma)}$ is the unique translation-invariant $(1,1)$-form whose contraction operation on $(1,1)$-vectors coincides with the principal polarization $N \otimes \Lambda \to \ZZ$ on $\Jac(\Gamma)$.  From another point of view, the image of $\nu_{\Jac(\Gamma)}$ under the tropical de Rham map is the first Chern class of the theta divisor $\Theta$.

\end{block}

\begin{alertblock}{Theorem A}

Let $t_{e}$ denote the standard coordinate on $e$, where we have identified $e$ with $[0,\ell(e)]$. Then locally on $e$, the pullback of $\nu_{\Jac(\Gamma)}$ by the Abel--Jacobi map has the form
\begin{equation}
  (\Phi_{q}^{(1)})^{*}(\nu_{\Jac(\Gamma)})|_{e} = \ell(e)^{-1} \mathbf{P}_{e,e} d't_{e} \wedge d''t_{e},
\end{equation}
where $\mathbf{P} \defeq \mathbf{M}^{\transpose}\mathbf{G}^{-1}\mathbf{MD}$ coincides with Kirchhoff's orthogonal projection matrix $C_{1}(G,\ZZ) \to H_{1}(G,\ZZ)$ with respect to the $E$ basis.
\end{alertblock}

\begin{block*}
  Our $(\Phi_{q}^{(1)})^{*}(\nu_{\Jac(\Gamma)})$ relates closely to the measure defined by Zhang in \cite{zhang1993admissible}, which \cite{baker2011metric} suggests is the correct tropical analogue of the Arakelov $(1,1)$-form $\nu_{X}$ on a Riemann surface $X$.  In this sense, we have a satisfactory replacement for \cref{eq:pullback} in our setting.
\end{block*}  

\begin{exampleblock}{Random spanning trees}
We remark that $\mathbf{P}_{e,e}$ equals the Foster coefficient of $e$.  This value, and $\mathbf{P}$ more generally, has surprising interpretations in terms of electrical networks, random walks, and spanning trees.  For example, given a spanning tree $T$ of $G$, we write $w(T) \defeq \prod_{e \not\in T} \ell(e)$ for its \defn{weight}, with $w(G) \defeq \sum_{T} w(T)$.  Then the random spanning tree model defined by the probability measure $\PP(T) \defeq \frac{w(T)}{w(G)}$ determines a determinantal point process on $E$; in particular, the probability that a fixed subset $E' \subset E$ is disjoint from a randomly sampled spanning tree $T$ is the equal to the minor $\det(\mathbf{P}_{E',E'})$ \cite{dejong2022cross}.  This is a reformulation of the transfer-current theorem.
\end{exampleblock}
\end{column}

\separatorcolumn

\begin{column}{\colwidth}

\begin{alertblock}{Theorem B}
As for \cref{eq:integral} in the complex setting, we have that
\begin{equation}
  \int_{\wti W_{d}} \frac{1}{d!}\,\nu^{\wedge d}_{\Jac(\Gamma)} = \binom{g}{d}.
\end{equation}
In particular, we recover Foster's theorem for $d = 1$ and (essentially) Kirchhoff's matrix tree theorem for $d = g$.
\end{alertblock}

\begin{block*}
  By the theory of tropical Poincar\'e duality established in \cite{jell2019superforms,gross2023sheaf}, we may associate to each tropical $k$-cycle $Z$ in $\Jac(\Gamma)$ a superform $\nu_{Z} \in \Cd^{g-k,g-k}(\Jac(\Gamma))$ for which $\int_{X} \nu_{Z} \wedge \alpha = \int_{Z} \alpha$ for all $d''$-closed $\alpha \in \Cd^{k,k}(\Jac(\Gamma))$.

The tropical Poincar\'e formula $[\wti{W}_{d}] = \frac{[\Theta]^{\cdot(g-d)}}{(g-d)!}$ was first proved in \cite{gross2023tautological} in the context of singular tropical homology.  By establishing a tropical de Rham theorem, we are able to reprove this by way of a corresponding formula for superforms:
\end{block*}

\begin{alertblock}{Theorem C}
We have that $\nu_{\Jac(\Gamma)} = \nu_{\Theta}$ and $(g-d)!\nu_{\wti{W}_{d}} = \nu_{\Theta}^{\wedge(g-d)}$.
\end{alertblock}

\begin{exampleblock}{Example}
  Let $G$ be the theta graph with edges $e_{i}$ as in \cref{fig:theta} and edge lengths $\ell_{i} \defeq \ell(e_{i})$.  Define a basis of $H_{1}(G,\ZZ)$ via $\gamma_{1} \defeq e_{1} + e_{3}$ and $\gamma_{2} \defeq e_{2} + e_{3}$.
\begin{figure}
  \subfigure[$G$\label{fig:theta}]{\input{figures/theta.tex}}
  \qquad
  \subfigure[$\Jac(\Gamma)$\label{fig:theta-jac}]{\input{figures/theta-jac.tex}}
\end{figure}
Then the Gram matrix $\mathbf{G}$ of the length pairing $[\cdot,\cdot]$ with respect to this basis is
\begin{equation}
  \mathbf{G} =
  \begin{pmatrix}
  \ell_{1} + \ell_{3} & \ell_{3} \\
  \ell_{3} & \ell_{2} + \ell_{3}
  \end{pmatrix}
  \qquad
  \mathbf{G}^{-1} = 
  \frac{1}{\ell_{1}\ell_{2} + \ell_{1}\ell_{3} + \ell_{2}\ell_{3}}
  \begin{pmatrix}
  \ell_{2} + \ell_{3} & -\ell_{3} \\
    -\ell_{3} & \ell_{1} + \ell_{3}
  \end{pmatrix}.
\end{equation}
Concretely, the columns of $\mathbf{G}$ generate a lattice $\Lambda$ inside of $N_{\RR} \cong \RR^{2}$, and the resulting quotient is $\Jac(\Gamma)$, with tropical structure defined by the natural lattice $N \cong \ZZ^{2}$.  A fundamental domain for $\Jac(\Gamma)$ in the case $\ell_{1} = \ell_{2} = \ell_{3} = 1$ is depicted in \cref{fig:theta-jac}.  The dotted line is $\wti W_{1}$.
\end{exampleblock}

\begin{block}{References}
  
\bibliographystyle{alpha}
\bibliography{poster}

\end{block}

\end{column}

\separatorcolumn
\end{columns}
\end{frame}

\end{document}

%%% Local Variables:
%%% mode: LaTeX
%%% TeX-master: t
%%% End:
